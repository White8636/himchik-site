# üöÄ –î–µ–ø–ª–æ–π –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Himchik

–ê–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ 2025-07-21 17:33:59

---

## üì¶ –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞

### –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è –≤—Ä—É—á–Ω—É—é:
```bash
cd /opt/himchik
./deploy.sh
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `deploy.sh`:
1. ‚úÖ –°–æ–∑–¥–∞—ë—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –≤ `/opt/backups`.
2. üßπ –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±—ç–∫–∞–ø–æ–≤.
3. üîÑ –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏–∑ Git (`git pull` –≤–µ—Ç–∫–∞ `main`).
4. üîç –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (`py_compile`).
5. üîÅ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å Gunicorn (`himchik.service`).
6. üì° –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∞–π—Ç (–æ—Ç–≤–µ—Ç –æ—Ç `http://127.0.0.1:8000`).
7. üì¨ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram.

---

## ‚ôªÔ∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd /opt/himchik
```

2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤:
```bash
ls -lt /opt/backups
```

3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–π:
```bash
sudo tar -xzf /opt/backups/himchik_backup_YYYYMMDD_HHMMSS.tar.gz -C /
```

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:
```bash
sudo systemctl restart himchik
```

> ‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ! –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `/opt/himchik` –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç `venv`, `app.py`, `templates`, `uploads` –∏ —Ç.–¥.

---

## üßº –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–≥–∏:
```bash
journalctl -u himchik.service -e
cat /var/log/himchik/error.log
cat /var/log/himchik/access.log
```

### –¢–µ—Å—Ç Gunicorn –≤—Ä—É—á–Ω—É—é:
```bash
/opt/himchik/venv/bin/gunicorn -w 3 -b 127.0.0.1:8000 app:app
```
